<ion-header>
  <ion-navbar class="bar-positive">

      <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>

    </button>
    <ion-title style="color:white">Estimates</ion-title>
    <ion-buttons end>
      <button ion-button icon-only [navPush]="postPage">
        <ion-icon style="color:#3AB9FF" name="add"></ion-icon>
      </button>



      <button ion-button icon-only (click)="addEstimate()">
        <ion-icon style="color:#3AB9FF" name="add"></ion-icon>
      </button>


    </ion-buttons>
  </ion-navbar>
</ion-header>



<ion-content>
  <ion-list>
  <!-- <ion-list reorder="true"> -->

    <!-- <button ion-button full color="secondary" [navPush]="postPage">Create New Estimate</button> -->
    <ion-list-header style="background-color:#3AB9FF; color:white">Newest</ion-list-header>

    <ion-item *ngFor="let post of posts | async">
      <ion-icon name="contact" item-left></ion-icon>
      {{post.clientName}}<br>
      <p>{{ post.estimateDate | date }} - #4</p>
      <p>{{ post.longDescription }} </p>
      <ion-icon name="text" item-right (click)="sendSMSwithVariablesTest(post.$key, post.clientName, post.clientPhoneNumber, post.jobType, post.estimateDate, post.estimatePrice, post.longDescription)"></ion-icon>
      <ion-icon name="more" item-right (click)="showOptions(post.$key, post.clientName, post.clientPhoneNumber, post.jobType, post.estimateDate, post.estimatePrice, post.longDescription)"></ion-icon>
      <p item-right>$ {{ post.estimatePrice }}<br>
      <button ion-button color="light">Draft</button>
    </ion-item>

   <!--  <ion-buttons end><button ion-button icon-only  (click)="showOptions(song.$key, song.title)"><ion-icon name="more"></ion-icon></button></ion-buttons> -->


    <ion-item>
      <ion-icon name="contacts" item-left></ion-icon>
      Richard Hendricks<br>
      <p>February 14 - #4</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="default">Pending</button>
    </ion-item>

    <ion-item>
      <ion-icon name="contacts" item-left></ion-icon>
      Erlich Bachman
      <p>February 13 - #3</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="light">Draft</button>
    </ion-item>

    <ion-item>
      <ion-icon name="contact" item-left></ion-icon>
      Dinesh Chugtai
      <p>February 8 - #2</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="default">Pending</button>
    </ion-item>

    <ion-item>
      <ion-icon name="contact" item-left></ion-icon>
      Jared Dunn
      <p>February 4 - #1</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="secondary">Sent</button>
    </ion-item>
  </ion-list>

  <ion-list>
    <ion-list-header style="background-color:#3AB9FF; color:white">January 2017</ion-list-header>
    <ion-item>
      <ion-icon name="contact" item-left></ion-icon>
      Dinesh Chugtai
      <p>January 21 - #2</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="light">Draft</button>
    </ion-item>

    <ion-item>
      <ion-icon name="contact" item-left></ion-icon>
      Jared Dunn
      <p>January 13 - #1</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="default">Pending</button>
    </ion-item>
  </ion-list>

  <ion-list>
    <ion-list-header style="background-color:#3AB9FF; color:white">December 2016</ion-list-header>
    <ion-item>
      <ion-icon name="contact" item-left></ion-icon>
      Gaven Belson
      <p>December 25 - #2</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="secondary">Sent</button>
    </ion-item>

    <ion-item>
      <ion-icon name="contact" item-left></ion-icon>
      Monica Brown
      <p>December 18 - #1</p>
      <ion-icon name="mail" item-right></ion-icon>
      <ion-icon name="calculator" item-right></ion-icon>
      <p item-right>$175.63<br>
      <button ion-button color="light">Draft</button>
    </ion-item>
  </ion-list>

<button class="button_fixed" ion-button color="secondary" block [navPush]="homePage">Sign Up</button>


<script>
document.addEventListener('deviceready', function () {
    // cordova.plugins.email is now available
}, false);

cordova.plugins.email.isAvailable(
    function (isAvailable) {
        // alert('Service is not available') unless isAvailable;
    }
);

cordova.plugins.email.open({
    to:      'max@mustermann.de',
    cc:      'erika@mustermann.de',
    bcc:     ['john@doe.com', 'jane@doe.com'],
    subject: 'Greetings',
    body:    'How are you? Nice greetings from Leipzig'
});
</script>

<script type="text/javascript">

hasAccount = function (app) {

  cordova.plugins.email.isAvailable(
      function (isAvailable) {
          // alert('Service is not available') unless isAvailable;
      }
  );
};


openDraft = function (isHtml) {
    if (isHtml && ['Win32NT', 'windows'].indexOf(device.platform) > -1) {
        alert('Not supported on that platform!');
        return;
    }
    cordova.plugins.email.open({
        to: 'to@email.de',
        cc: ['cc1@email.de', 'cc2@email.de'],
        bcc: ['bcc1@email.de', 'bcc2@email.de'],
        subject: isHtml ? 'Body with HTML and CSS3' : 'Body with plain text',
        body: 'How are you? Nice greetings from Leipzig'
    }, showToast);
};

document.addEventListener('deviceready', function () {
    cordova.plugins.email.isAvailable(
        function (isAvailable) {
            alert("is email mobile available? " + (isAvailable ? "Yes" : "No"));
            if(isAvailable){
             window.plugin.email.open({
                 to:      'test@test.com',
                 subject: 'Greetings',
                 body:    'How are you? Nice greetings from Leipzig'
             }, callback, scope);
           }
        }
    );
}, false);

function callback(){
    console.log("callback function");
}

function scope(){
    console.log("scope function");
}

</script>


<button ion-button color="secondary" block (click)="openDraft()">Plain,open (to, subject, body)</button>
<button ion-button color="secondary" block (click)="openDraft(true)">HTMLopen (html:true)</button>


<button ion-button color="primary" block (click)="sendSMS()">Send SMS</button>
<ion-icon name="text" item-right (click)="sendSMS()"></ion-icon>


<!-- <input id="numberTxt" placeholder="Enter mobile number" value="" type="tel" />
<textarea id="messageTxt" placeholder="Enter message"></textarea>
<input type="button" onclick="app.sendSms()" value="Send SMS" />

<script>var app = {
    sendSms: function() {
        var number = document.getElementById('numberTxt').value;
        var message = document.getElementById('messageTxt').value;
        console.log("number=" + number + ", message= " + message);

        //CONFIGURATION
        var options = {
            replaceLineBreaks: false, // true to replace \n by a new line, false by default
            android: {
                intent: 'INTENT'  // send SMS with the native android SMS messaging
                //intent: '' // send SMS without open any other app
            }
        };

        var success = function () { alert('Message sent successfully'); };
        var error = function (e) { alert('Message Failed:' + e); };
        sms.send(number, message, options, success, error);
    }
};
</script> -->




</ion-content>

